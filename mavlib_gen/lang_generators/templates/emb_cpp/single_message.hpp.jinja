{#
    Template to generate a cpp struct and class for a single MAVLink message definition
#}
/// MAVLink mesage definition for {{ msg.name }}
///
/// AUTOGENERATED by mavlib_gen. DO NOT MODIFY DIRECTLY
#ifndef __MAVLINK_MSG_{{ msg.get_name("UPPER_SNAKE") }}_HPP__
#define __MAVLINK_MSG_{{ msg.get_name("UPPER_SNAKE") }}_HPP__
#include "MavlinkTypes.hpp"

namespace mavgen {
{% if use_dialect_namespaces %}
namespace {{ dialect_name_lower }} {
{% endif %}

struct Payload{{ msg.get_name("UpperCamel") }} {
{% for field in msg.sorted_fields %}
    /// {{ field.formatted_description(line_prefix="/// ") | indent }}
    {% if field.is_array %}
    {{ field.base_type }} {{ field.name }}[{{ field.array_len }}];
    {% else %}
    {{ field.base_type }} {{ field.name }};
    {% endif %}
{% endfor %}
{% if msg.has_extensions %}
    // extension fields:
{% for field in msg.extension_fields %}
    /// {{ field.formatted_description(line_prefix="/// ") | indent }}
    {% if field.is_array %}
    {{ field.base_type }} {{ field.name }}[{{ field.array_len }}];
    {% else %}
    {{ field.base_type }} {{ field.name }};
    {% endif %}
{% endfor %}
{% endif %}
};

/// Message{{ msg.get_name("UpperCamel") }}
///
/// {{ msg.formatted_description(line_prefix="/// ") }}
class Message{{ msg.get_name("UpperCamel") }} : public IMavlinkMessage {
  public:

    static constexpr char* NAME = "{{ msg.name }}";

    // interface implementations
    static constexpr MavlinkMsgInfo INFO = {
        .msgid = {{ msg.id }},
        .crcExtra = {{ msg.crc_extra }},
        .maxLength = {{ msg.byte_length }},
    };
    const MavlinkMsgInfo& getMsgInfo() const override { return INFO; }

#ifdef MAV_INCLUDE_MSG_DETAILS
    static constexpr MavlinkMsgDetails DETAILS = {
        .fields = {
            {% for field in msg.all_fields_sorted %}
            {
                .name = "{{ field.name }}",
                .type = MavlinkFieldType::{{ field.base_type | upper }},
                .arrayLength = {{ field.array_len }},
                .byteSize = {{ field.field_len }},
                .wireOffset = {{ field.wire_offset }},
            },
            {% endfor %}
        },
        .numFields = {{ msg.num_fields }},
        .name = "{{ msg.name }}",
    };

    const MavlinkMsgDetails& getMsgDetails() const override { return DETAILS; }
#endif
};

{% if use_dialect_namespaces %}
} // namespace {{ dialect_name_lower }}
{% endif %}
} // namespace mavgen

#endif /* __MAVLINK_MSG_{{ msg.get_name("UPPER_SNAKE") }}_HPP__ */
